FROM python:3.7

RUN apt-get update
RUN apt-get -y install default-libmysqlclient-dev || apt-get -y install libmysqlclient-dev

ADD ./requirements.txt ./requirements.txt

COPY . .

RUN pip install -r requirements.txt

ENV CELERY_BROKER_URL redis://soundchat-redis

CMD celery -A tasks worker --app=main.libs.tasks --loglevel=DEBUG
